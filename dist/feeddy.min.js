var feeddy=function(t){"use strict";function n(t,n){var r=typeof t;return(Array.isArray(n)?n:[n]).every((function(t){return r===t}))}function r(t){return null!=t}function e(t){return r(t)&&n(t,"object")}function o(t){return n(t,"function")}function u(t,n,r){return t.apply(n,arguments[2])}function i(t,n){return r(t)?t.toString():(n=o(n)?n:function(){return""})()}var a=function(t,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},a(t,n)};function s(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}a(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}"function"==typeof SuppressedError&&SuppressedError,function(t){function n(n){var r=t.call(this,n)||this;return r.name="IllegalAccessError",r}s(n,t)}(Error);var c=function(t){function n(n){var r=t.call(this,n)||this;return r.name="IllegalArgumentError",r}return s(n,t),n}(Error);function f(t,n,e){return r(t)?t:h(t,r,n,e)}function h(t,n,r,e){return n(t)?t:(l(r,"function","builder"),t=u(r,e))}function p(t,n,r){if(n=l(n,"function","condition"),r=f(r,(function(){return"The given value not meets the given condition."})),!n(t))throw new c(r);return t}function l(t,r,e){if(e=f(e,(function(){return"value"})),Array.isArray(r)){if(r.every((function(r){return!n(t,r)})))throw new c("The ".concat(e," argument must be be one of these types: [").concat(r,"]"))}else if(!n(t,r))throw new c("The ".concat(e," argument must be a ").concat(r));return t}function d(t){return Object.keys(t)}function m(t,n,r,e){return u(t.prototype[n],r,arguments[3])}function y(t,n){return m(Object,"hasOwnProperty",t,[n])}function v(t,n,r){if(o(t.forEach)){n=function(t,n){return t.bind(n)}(n,r);var e=0;t.forEach((function(r){n(r,e,t),e++}))}else m(Array,"forEach",t,[n,r])}function g(t,n,o,u){r(n)&&e(n)&&v(d(n),(function(u){if("deep"===o&&y(t,u)){var i=t[u],a=n[u];r(s=i)&&s.constructor==={}.constructor&&e(a)?g(i,a,o):t[u]=n[u]}else t[u]=n[u];var s}))}function b(t,n,e,o){if(!r(n)||!r(e))return n;for(var u=0;u<e.length;u++)g(n,e[u],t);return n}function x(t){var n=[];return r(t)?(e(t)?v(d(t),(function(r){n.push({key:r,value:e(t[r])?x(t[r]):t[r]})})):n.push({key:t.toString(),value:t}),n):n}function w(t,n,r){v(d(n),(function(e){return r(t,e,n[e])}))}function A(t,n,r,e){!function(t,n,r){y(t,n)||Object.defineProperty(t,n,r)}(t,n,{enumerable:!1,value:r,writable:e})}function S(t,n,r){A(t,n,r,!1)}function O(t,n){w(t,n,S)}function $(t,n,r){A(t,n,r,!0)}function j(t,n,r){return m(Array,"slice",t,[n,r])}function E(t,n){return t.apply(n,j(arguments,2))}function P(){return 0===this.length}function M(){return!u(P,this)}function R(t){var n=parseInt(this,t);return isNaN(n)?null:n}function L(){var t=parseFloat(this);return isNaN(t)?null:t}function k(t){var n=this.valueOf();return n<t?t:n}function q(t,n){if(t>n)throw new c("Cannot coerce value to an empty range: maximum ".concat(n," is less than minimum ").concat(t,"."));var r=this.valueOf();return r<t?t:r>n?n:r}function I(t){return r(t=E(R,i(t)))?u(k,t,[1]):1}function N(t){try{return new Date(t).toISOString()}catch(n){return void(r(t)&&console.error("No valid date given: ",t))}}function T(t,n,r,e,o){if(t.length>0||o){var u=t.length>0?t[0]:n[r];n[r]=e?e(u):u}}!function(t){function n(n){var r=t.call(this,n)||this;return r.name="RequiredArgumentError",r}s(n,t)}(c);var _=function(){function t(t){O(this,{source:f(t,(function(){return{}}))})}return t.from=function(n,r){return n instanceof t?r?t.from(n.source,r):n:new t(r?function(t){return b("simple",t,arguments)}({},n):n)},t.prototype.max=function(t){var n=this.source;return T(arguments,n,"max-results",I,!0),n["max-results"]},t.prototype.start=function(t){var n=this.source;return T(arguments,n,"start-index",I,!0),n["start-index"]},t.prototype.publishedAtLeast=function(t){var n=this.source;return T(arguments,n,"published-min",N),n["published-min"]},t.prototype.publishedAtMost=function(t){var n=this.source;return T(arguments,n,"published-max",N),n["published-max"]},t.prototype.updatedAtLeast=function(t){var n=this.source;return T(arguments,n,"updated-min",N),n["updated-min"]},t.prototype.updatedAtMost=function(t){var n=this.source;return T(arguments,n,"updated-max",N),n["updated-max"]},t.prototype.orderby=function(t){return t="updated"===t||"starttime"===t||"lastmodified"===t?t:"lastmodified",this.source.orderby=t,t},t.prototype.query=function(t){var n=this.source;return T(arguments,n,"q"),n.q},t.prototype.alt=function(t){T(arguments,this.source,"alt",(function(t){return"alt"==t||"rss"===t?t:"json"}))},t.prototype.toDefined=function(){var t={};return v(d(this.source),(function(n){r(this[n])&&(t[n]=this[n])}),this.source),t},t}(),B=0,Q=Math.random();function z(t){return"Symbol('".concat(i(t),"')_").concat(u(1..toString,++B+Q,[36]))}function C(t,n){return t[n]}function U(t,n,r){return t[n]=r,t[n]}function D(t,n){var r=C(this,Y),e=r.start();t=E(R,i(t))|0,e="add"===n?e+t:"subtract"===n?e-t:t,r.start(e)}function F(t,n,e,o,u,i){!r(t)&&u||E(e,this,t),!r(n)&&i||E(o,this,n)}var Y=z("SearchParamsBuilder#params"),G=function(){function t(n){if(!(n instanceof _))return t.from(n);this[Y]=n}return t.from=function(n,r){return new t(_.from(n,r))},t.empty=function(){return new t({})},Object.defineProperty(t,"maxResults",{get:function(){return 500},enumerable:!1,configurable:!0}),t.prototype.max=function(t){return C(this,Y).max(t),this},t.prototype.limit=function(t){return this.max(t)},t.prototype.start=function(t){return E(D,this,t,"replace"),this},t.prototype.plusStart=function(t){return E(D,this,t,"add"),this},t.prototype.minusStart=function(t){return E(D,this,t,"subtract"),this},t.prototype.index=function(t){return this.start(t)},t.prototype.plusIndex=function(t){return this.plusStart(t)},t.prototype.minusIndex=function(t){return this.minusStart(t)},t.prototype.paginated=function(t){if(r(t)){var n=C(this,Y).max();this.start(u(k,E(R,i(t))-1,[0])*n+1)}return this},t.prototype.published=function(t,n){var r=C(this,Y);return E(F,r,t,n,r.publishedAtLeast,r.publishedAtMost),this},t.prototype.publishedAtLeast=function(t){var n=C(this,Y);return E(F,n,t,void 0,n.publishedAtLeast,n.publishedAtMost,!1,!0),this},t.prototype.publishedAtMost=function(t){var n=C(this,Y);return E(F,n,void 0,t,n.publishedAtLeast,n.publishedAtMost,!0),this},t.prototype.updated=function(t,n){var r=C(this,Y);return E(F,r,t,n,r.updatedAtLeast,r.updatedAtMost),this},t.prototype.updatedAtLeast=function(t){var n=C(this,Y);return E(F,n,t,void 0,n.updatedAtLeast,n.updatedAtMost,!1,!0),this},t.prototype.updatedAtMost=function(t){var n=C(this,Y);return E(F,n,void 0,t,n.updatedAtLeast,n.updatedAtMost,!0),this},t.prototype.order=function(t){return C(this,Y).orderby(t),this},t.prototype.query=function(t){return C(this,Y).query(t),this},t.prototype.build=function(n){var r=C(this,Y);return n?t.from(r.source,!0).build():r.source},t}();var H={posts:function(){return"feeds/posts/default"},postsSummary:function(){return"feeds/posts/summary"}};function J(t){var n,e,o;if(n=t,e=f(e="options",(function(){return"value"})),p(n,r,"The given ".concat(e," argument must be defined.")),r(t.blogUrl))o=t.blogUrl;else{if(!location)throw new c("You must pass the blog url or call this on the browser.");o=location.origin}t.blogUrl=o;var i=new URL(o);i.pathname+="full"===t.route?H.posts():H.postsSummary();var a=_.from(t.params);return a.alt("json"),a.max(u(q,a.max(),[1,G.maxResults])),v(x(a.toDefined()),(function(t){i.searchParams.set(t.key,t.value)})),i}function K(t){return p(t,e,"The source must be an indexable object."),u(this.push,this,t),this}function V(t,n){t=W(t);var r=_.from(t.params);n&&(r.start(1),r.max(G.maxResults));var e=[],o=J(t),a=r.start();return function o(s,c){return fetch(s).then((function(t){return t.json()})).then((function(s){var h=s.feed,p=f(h.entry,(function(){return[]}));u(K,e,[p]);var l=p.length,d=G.maxResults;return u(M,p)&&l>=d&&(n&&l>=d||!n&&l<c)?(n||(c-=l),r.start(r.start()+l),r.max(c),o(J(t),c)):(h.entry=e,r.max()!==e.length&&(h.openSearch$itemsPerPage.$t=h.openSearch$totalResults.$t=i(e.length)),h.openSearch$startIndex.$t=i(a),s)}))}(o,r.max())}function W(t){return function(t){return b("deep",t,arguments)}({route:"summary",params:{"max-results":1}},t)}function X(t){return V(t)}function Z(t){return V(t,!0)}function tt(t){return e(t)?i(t.$t):""}function nt(t){return u(R,tt(t))}function rt(t){return Array.isArray(t)?t.map((function(t){return t.term})):[]}function et(t){return{email:tt(t.email),name:tt(t.name),uri:tt(t.uri),gd$image:t.gd$image}}function ot(t){var n,r=t.feed;return{version:t.version,encoding:t.encoding,feed:{id:tt(r.id),author:r.author.map(et),category:rt(r.category),blogger$adultContent:(n=r.blogger$adultContent,Boolean(tt(n))),title:tt(r.title),subtitle:tt(r.subtitle),updated:tt(r.updated),openSearch$startIndex:nt(r.openSearch$startIndex),openSearch$totalResults:nt(r.openSearch$totalResults),openSearch$itemsPerPage:nt(r.openSearch$itemsPerPage),entry:Array.isArray(r.entry)?r.entry.map((function(t){return function(t){if(!e(t))return{};var n=t.media$thumbnail,r={id:tt(t.id),author:t.author.map(et),title:tt(t.title),link:t.link,category:rt(t.category),media$thumbnail:{width:u(R,n.width),height:u(R,n.height),url:n.url},updated:tt(t.updated),published:tt(t.published)};if(t.content)r.content=tt(t.content);else{if(!t.summary)throw new c("No valid post given");r.summary=tt(t.summary)}return r}(t)})):[],link:r.link}}}function ut(t){return Z(t).then(ot)}function it(t){return X(t).then(ot)}function at(t,e,o,a,s){var f,h=1;r(a)?n(f=a,"number")&&!isNaN(f)?h=a:e(a)||(h=at(t,e,a,1,!0).ratio()):h=at(t,e,o,1,!0).ratio();var p=i(o).split(":"),l=u(L,p[0]),d=u(L,p[1]);if(r(l)&&r(d))return new t(l,d).adjust(s?0:h);if(r(l))d=l/h;else{if(!r(d))throw new c("The ".concat(s?"ratio":"format"," '").concat(o,"' is not valid."));l=d*h}return new t(l,d)}z("Size#width"),z("Size#height");var st=function(t){return"OR"===t?"|":" "},ct=function(t){return t?'"':""},ft=function(){return"-"},ht=z("QueryStringBuilder#Query"),pt=z("QueryStringBuilder#Exclude"),lt=z("QueryStringBuilder#Operator"),dt=z("QueryStringBuilder#Exact");function mt(t,n,r,e){return Array.isArray(t)?(e=f(e,(function(){return r})),t=t.map((function(t){return i(t)})).filter((function(t){return u(M,t)})),u(P,t)?"":"".concat(r).concat(t.join(n)).concat(e)):mt([t],n,r,e)}function yt(t,n){if(0!==t.length){var r=ct(C(this,dt)),e=st(C(this,lt)),o=C(this,pt)?ft():"";n=u(M,n=i(n))?n+":":"";var a=C(this,ht),s=mt(j(t),r+e+o+n+r,o+n+r,r);return u(M,a)&&(a+=e),a+=s,this[ht]=a,this}}var vt=function(){function t(){var t={};t[dt]=!1,t[lt]="OR",t[pt]=!1,t[ht]="",w(this,t,$)}return t.prototype.and=function(){return U(this,lt,"AND"),this},t.prototype.or=function(){return U(this,lt,"OR"),this},t.prototype.exact=function(){return U(this,dt,!0),this},t.prototype.noExact=function(){return U(this,dt,!1),this},t.prototype.exclude=function(){return U(this,pt,!0),this},t.prototype.noExclude=function(){return U(this,pt,!1),this},t.prototype.terms=function(){return u(yt,this,[arguments]),this},t.prototype.named=function(t){return u(yt,this,[j(arguments,1),t]),this},t.prototype.categories=function(){return u(this.named,this,["label"].concat(j(arguments)))},t.prototype.labels=function(){return u(this.categories,this,arguments)},t.prototype.build=function(){var t=C(this,ht);return u(P,t)?void 0:t},t}();function gt(){return new vt}var bt="s72-c";function xt(t){l(t,"object","options"),t.feed=h(t.feed,e,(function(){return{}}));var n=t.feed,o=_.from(n.params);function u(t){return n.params=G.from(o).paginated(t).build(),it(n).then((function(t){return Object.freeze({posts:r(t)?t.feed.entry:[],blog:t})}))}return(o.query()?ut:it)(n).then((function(t){return Object.freeze({total:t.feed.openSearch$totalResults,page:u})}))}O(X,{all:Z});var wt=it;O(wt,{all:ut,raw:X});var At={query:gt,QueryStringBuilder:vt,params:function(){return G.empty()},SearchParamsBuilder:G};return O(xt,{createsThumbnail:function(t,n,r){var o=at((function(t,n){this.width=Math.round(t),this.height=Math.round(n),this.adjust=function(){return this},this.ratio=function(){return 0===this.height?0:this.width/this.height}}),e,function(t){return e(t)?"".concat(i(t.width),":").concat(i(t.height)):i(t)}(n),f(r,(function(){return 16/9}))),u="w".concat(o.width,"-h").concat(o.height,"-p-k-no-nu");return t.media$thumbnail.url.replace("/".concat(bt,"/"),"/".concat(u,"/")).replace("=".concat(bt),"=".concat(u))},withCategories:function(t){var n=t.categories;if(u(P,n))return new Promise((function(t,n){return n("The categories are empty.")}));var r,e,o,i=W(t.feed),a=_.from(i.params),s=(r=gt(),e=function(n){return u(t.every?n.and:n.or,n)},u(e,o,[r]));return G.from(a).query(u(s.categories,s,n).build()),ut(i).then((function(t){return Object.freeze({posts:t.feed.entry.map((function(t){return{count:t.category.filter((function(t){return n.indexOf(t)>=0})).length,post:t}})).sort((function(t,n){return n.count-t.count})).slice(0,a.max()),blog:t})}))}}),t.buildUrl=J,t.feed=wt,t.posts=xt,t.routes=H,t.search=At,t}({});
