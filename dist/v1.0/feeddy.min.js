var feeddy=function(t){"use strict";function n(t,n){var r=typeof t;return(Array.isArray(n)?n:[n]).every((function(t){return r===t}))}function r(t){return null!=t}function e(t){return r(t)&&n(t,"object")}function o(t){return n(t,"function")}function i(t,n,r){return t.apply(n,arguments[2])}function u(t,n){return r(t)?t.toString():(n=o(n)?n:function(){return""})()}function a(t){return Object.keys(t)}function s(t,n){return t[n]}var c=function(t,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},c(t,n)};function f(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}c(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}"function"==typeof SuppressedError&&SuppressedError,function(t){function n(n){var r=t.call(this,n)||this;return r.name="IllegalAccessError",r}f(n,t)}(Error);var p=function(t){function n(n){var r=t.call(this,n)||this;return r.name="IllegalArgumentError",r}return f(n,t),n}(Error);function h(t,n,e){return r(t)?t:l(t,r,n,e)}function l(t,n,r,e){return n(t)?t:(m(r,"function","builder"),t=i(r,e))}function d(t,n,r){if(n=m(n,"function","condition"),r=h(r,(function(){return"The given value not meets the given condition."})),!n(t))throw new p(r);return t}function m(t,r,e){if(e=h(e,(function(){return"value"})),Array.isArray(r)){if(r.every((function(r){return!n(t,r)})))throw new p("The ".concat(e," argument must be be one of these types: [").concat(r,"]"))}else if(!n(t,r))throw new p("The ".concat(e," argument must be a ").concat(r));return t}function y(t,n,r){return i(Array.prototype.slice,t,[n,r])}function _(t,n,r){if(o(s(t,"forEach"))){n=function(t,n){return t.bind(n)}(n,r);var e=0;t.forEach((function(r){n(r,e,t),e++}))}else i(Array.prototype.forEach,t,[n,r])}function v(t,n){return i(Object.prototype.hasOwnProperty,t,[n])}function g(t,n,o,i){r(n)&&e(n)&&_(a(n),(function(i){if("deep"===o&&v(t,i)){var u=t[i],a=n[i];r(s=u)&&s.constructor==={}.constructor&&e(a)?g(u,a,o):t[i]=n[i]}else t[i]=n[i];var s}))}function b(t,n,e,o){if(!r(n)||!r(e))return n;for(var i=0;i<e.length;i++)g(n,e[i],t);return n}function x(t){var n=[];return r(t)?(e(t)?_(a(t),(function(r){n.push({key:r,value:e(t[r])?x(t[r]):t[r]})})):n.push({key:t.toString(),value:t}),n):n}function A(t,n,r){_(a(n),(function(e){return r(t,e,n[e])}))}function w(t,n,r,e){!function(t,n,r){v(t,n)||Object.defineProperty(t,n,r)}(t,n,{enumerable:!1,value:r,writable:e})}function S(t,n,r){w(t,n,r,!1)}function E(t,n){A(t,n,S)}function $(t,n,r){w(t,n,r,!0)}function O(t){return r(t=u(t).toInt())?t.coerceAtLeast(1):1}function I(t){try{return new Date(t).toISOString()}catch(n){return void(r(t)&&console.error("No valid date given: ",t))}}function j(t,n,r,e,o){if(t.length>0||o){var i=t.length>0?t[0]:n[r];n[r]=e?e(i):i}}!function(t){function n(n){var r=t.call(this,n)||this;return r.name="RequiredArgumentError",r}f(n,t)}(p);var N=function(){function t(t){E(this,{source:h(t,(function(){return{}}))})}return t.from=function(n,r){return n instanceof t?r?t.from(n.source,r):n:new t(r?function(t){return b("simple",t,arguments)}({},n):n)},t.prototype.max=function(t){return j(arguments,this.source,"max-results",O,!0),this.source["max-results"]},t.prototype.start=function(t){return j(arguments,this.source,"start-index",O,!0),this.source["start-index"]},t.prototype.publishedAtLeast=function(t){return j(arguments,this.source,"published-min",I),this.source["published-min"]},t.prototype.publishedAtMost=function(t){return j(arguments,this.source,"published-max",I),this.source["published-max"]},t.prototype.updatedAtLeast=function(t){return j(arguments,this.source,"updated-min",I),this.source["updated-min"]},t.prototype.updatedAtMost=function(t){return j(arguments,this.source,"updated-max",I),this.source["updated-max"]},t.prototype.orderby=function(t){return t="updated"===t||"starttime"===t||"lastmodified"===t?t:"lastmodified",this.source.orderby=t,t},t.prototype.query=function(t){return j(arguments,this.source,"q"),this.source.q},t.prototype.alt=function(t){j(arguments,this.source,"alt",(function(t){return"alt"==t||"rss"===t?t:"json"}))},t.prototype.toDefined=function(){var t={};return _(a(this.source),(function(n){r(this[n])&&(t[n]=this[n])}),this.source),t},t}();function P(t,n){return t.apply(n,y(arguments,2))}function R(t,n){var r=this.__params__.start();t=u(t).toInt()|0,r="add"===n?r+t:"subtract"===n?r-t:t,this.__params__.start(r)}function L(t,n,e,o,i,u){!r(t)&&i||P(e,this,t),!r(n)&&u||P(o,this,n)}var M=function(){function t(n){if(!(n instanceof N))return t.from(n);this.__params__=n}return t.from=function(n,r){return new t(N.from(n,r))},t.empty=function(){return new t({})},Object.defineProperty(t,"maxResults",{get:function(){return 500},enumerable:!1,configurable:!0}),t.prototype.max=function(t){return this.__params__.max(t),this},t.prototype.limit=function(t){return this.max(t)},t.prototype.start=function(t){return P(R,this,t,"replace"),this},t.prototype.plusStart=function(t){return P(R,this,t,"add"),this},t.prototype.minusStart=function(t){return P(R,this,t,"subtract"),this},t.prototype.index=function(t){return this.start(t)},t.prototype.plusIndex=function(t){return this.plusStart(t)},t.prototype.minusIndex=function(t){return this.minusStart(t)},t.prototype.paginated=function(t){if(r(t)){var n=this.__params__.max();this.start((u(t).toInt()-1).coerceAtLeast(0)*n+1)}return this},t.prototype.published=function(t,n){return P(L,this.__params__,t,n,this.__params__.publishedAtLeast,this.__params__.publishedAtMost),this},t.prototype.publishedAtLeast=function(t){return P(L,this.__params__,t,void 0,this.__params__.publishedAtLeast,this.__params__.publishedAtMost,!1,!0),this},t.prototype.publishedAtMost=function(t){return P(L,this.__params__,void 0,t,this.__params__.publishedAtLeast,this.__params__.publishedAtMost,!0),this},t.prototype.updated=function(t,n){return P(L,this.__params__,t,n,this.__params__.updatedAtLeast,this.__params__.updatedAtMost),this},t.prototype.updatedAtLeast=function(t){return P(L,this.__params__,t,void 0,this.__params__.updatedAtLeast,this.__params__.updatedAtMost,!1,!0),this},t.prototype.updatedAtMost=function(t){return P(L,this.__params__,void 0,t,this.__params__.updatedAtLeast,this.__params__.updatedAtMost,!0),this},t.prototype.order=function(t){return this.__params__.orderby(t),this},t.prototype.query=function(t){return this.__params__.query(t),this},t.prototype.build=function(n){return n?t.from(this.__params__.source,!0).build():this.__params__.source},t}();var k={posts:function(){return"feeds/posts/default"},postsSummary:function(){return"feeds/posts/summary"}};function q(t){var n,e,o;if(n=t,e=h(e="options",(function(){return"value"})),d(n,r,"The given ".concat(e," argument must be defined.")),r(t.blogUrl))o=t.blogUrl;else{if(!location)throw new p("You must pass the blog url or call this on the browser.");o=location.origin}t.blogUrl=o;var i=new URL(o);i.pathname+="full"===t.route?k.posts():k.postsSummary();var u=N.from(t.params);return u.alt("json"),u.max(u.max().coerceIn(1,M.maxResults)),_(x(u.toDefined()),(function(t){i.searchParams.set(t.key,t.value)})),i}function T(t,n){t=B(t);var r=N.from(t.params);n&&(r.start(1),r.max(M.maxResults));var e=[],o=q(t),i=r.start();return function o(u,a){return fetch(u).then((function(t){return t.json()})).then((function(u){var s=h(u.feed.entry,(function(){return[]})),c=u.feed;return e.extends(s),s.isNotEmpty()&&s.length>=M.maxResults&&(n&&s.length>=M.maxResults||!n&&s.length<a)?(n||(a-=s.length),r.start(r.start()+s.length),r.max(a),o(q(t),a)):(c.entry=e,r.max()!==e.length&&(c.openSearch$itemsPerPage.$t=c.openSearch$totalResults.$t=e.length.toString()),c.openSearch$startIndex.$t=i.toString(),u)}))}(o,r.max())}function B(t){return function(t){return b("deep",t,arguments)}({route:"summary",params:{"max-results":1}},t)}function Q(t){return T(t)}function C(t){return T(t,!0)}function U(t){return e(t)?u(t.$t):""}function D(t){return U(t).toInt()}function z(t){return Array.isArray(t)?t.map((function(t){return t.term})):[]}function F(t){return{email:U(t.email),name:U(t.name),uri:U(t.uri),gd$image:t.gd$image}}function Y(t){var n,r=t.feed;return{version:t.version,encoding:t.encoding,feed:{id:U(r.id),author:r.author.map(F),category:z(r.category),blogger$adultContent:(n=r.blogger$adultContent,Boolean(U(n))),title:U(r.title),subtitle:U(r.subtitle),updated:U(r.updated),openSearch$startIndex:D(r.openSearch$startIndex),openSearch$totalResults:D(r.openSearch$totalResults),openSearch$itemsPerPage:D(r.openSearch$itemsPerPage),entry:Array.isArray(r.entry)?r.entry.map((function(t){return function(t){if(!e(t))return{};var n={id:U(t.id),author:t.author.map(F),title:U(t.title),link:t.link,category:z(t.category),media$thumbnail:{width:t.media$thumbnail.width.toInt(),height:t.media$thumbnail.height.toInt(),url:t.media$thumbnail.url},updated:U(t.updated),published:U(t.published)};if(t.content)n.content=U(t.content);else{if(!t.summary)throw new p("No valid post given");n.summary=U(t.summary)}return n}(t)})):[],link:r.link}}}function G(t){return C(t).then(Y)}function H(t){return Q(t).then(Y)}function J(){return 0===this.length}function K(){return!i(J,this)}function V(){var t=parseFloat(this);return isNaN(t)?null:t}function W(t,e,o,a,s){var c,f=1;r(a)?n(c=a,"number")&&!isNaN(c)?f=a:e(a)||(f=W(t,e,a,1,!0).ratio()):f=W(t,e,o,1,!0).ratio();var h=u(o).split(":"),l=i(V,h[0]),d=i(V,h[1]);if(r(l)&&r(d))return new t(l,d).adjust(s?0:f);if(r(l))d=l/f;else{if(!r(d))throw new p("The ".concat(s?"ratio":"format"," '").concat(o,"' is not valid."));l=d*f}return new t(l,d)}var X=0,Z=Math.random();function tt(t){return"Symbol('".concat(u(t),"')_").concat(i(1..toString,++X+Z,[36]))}var nt=function(t){return"OR"===t?"|":" "},rt=function(t){return t?'"':""},et=function(){return"-"},ot=tt("QueryStringBuilder#Query"),it=tt("QueryStringBuilder#Exclude"),ut=tt("QueryStringBuilder#Operator"),at=tt("QueryStringBuilder#Exact");function st(t,n,r,e){return Array.isArray(t)?(e=h(e,(function(){return r})),(t=t.map((function(t){return u(t)})).filter((function(t){return t.isNotEmpty()}))).isEmpty()?"":"".concat(r).concat(t.join(n)).concat(e)):st([t],n,r,e)}function ct(t,n){if(0!==t.length){var r=rt(s(this,at)),e=nt(s(this,ut)),o=s(this,it)?et():"";n=(n=u(n)).isNotEmpty()?n+":":"";var i=s(this,ot),a=st(y(t),r+e+o+n+r,o+n+r,r);return i.isNotEmpty()&&(i+=e),i+=a,this[ot]=i,this}}var ft=function(){function t(){var t={};t[at]=!1,t[ut]="OR",t[it]=!1,t[ot]="",A(this,t,$)}return t.prototype.and=function(){return this[ut]="AND",this},t.prototype.or=function(){return this[ut]="OR",this},t.prototype.exact=function(){return this[at]=!0,this},t.prototype.noExact=function(){return this[at]=!1,this},t.prototype.exclude=function(){return this[it]=!0,this},t.prototype.noExclude=function(){return this[it]=!1,this},t.prototype.terms=function(){return i(ct,this,[arguments]),this},t.prototype.named=function(t){return i(ct,this,[y(arguments,1),t]),this},t.prototype.categories=function(){return i(this.named,this,["label"].concat(y(arguments)))},t.prototype.labels=function(){return i(this.categories,this,arguments)},t.prototype.build=function(){var t=s(this,ot);return t.isEmpty()?void 0:t},t}();function pt(){return new ft}var ht,lt="s72-c";function dt(t){m(t,"object","options"),t.feed=l(t.feed,e,(function(){return{}}));var n=N.from(t.feed.params);function o(e){t.feed.params=M.from(n).paginated(e).build(),H(t.feed).then((function(n){r(n)&&t.onPosts(n.feed.entry,n)}))}(n.query()?G:H)(t.feed).then((function(n){n.feed.openSearch$totalResults>0&&t.onTotal(Object.freeze({total:n.feed.openSearch$totalResults,page:o}))})).catch(console.error)}ht={isEmpty:J,isNotEmpty:K,extends:function(t){return d(t,e,"The source must be an indexable object."),i(this.push,this,t),this}},E(Array.prototype,ht),function(t){E(Number.prototype,t)}({coerceIn:function(t,n){if(t>n)throw new p("Cannot coerce value to an empty range: maximum ".concat(n," is less than minimum ").concat(t,"."));var r=this.valueOf();return r<t?t:r>n?n:r},coerceAtLeast:function(t){var n=this.valueOf();return n<t?t:n},coerceAtMost:function(t){var n=this.valueOf();return n>t?t:n}}),function(t){E(String.prototype,t)}({isEmpty:J,isNotEmpty:K,toInt:function(t){var n=parseInt(this,t);return isNaN(n)?null:n}}),E(Q,{all:C});var mt=H;E(mt,{all:G,raw:Q});var yt={query:pt,QueryStringBuilder:ft,params:function(){return M.empty()},SearchParamsBuilder:M};return E(dt,{createsThumbnail:function(t,n,r){var o=W((function(t,n){this.width=Math.round(t),this.height=Math.round(n),this.adjust=function(){return this},this.ratio=function(){return 0===this.height?0:this.width/this.height}}),e,function(t){return e(t)?"".concat(u(t.width),":").concat(u(t.height)):u(t)}(n),h(r,(function(){return 16/9}))),i="w".concat(o.width,"-h").concat(o.height,"-p-k-no-nu");return t.media$thumbnail.url.replace("/".concat(lt,"/"),"/".concat(i,"/")).replace("=".concat(lt),"=".concat(i))},withCategories:function(t){var n=t.categories;if(!n.isEmpty()){var r,e,o,u=B(t.feed),a=N.from(u.params),s=(r=pt(),e=function(n){return i(t.every?n.and:n.or,n)},i(e,o,[r]));M.from(a).query(i(s.categories,s,n).build()),G(u).then((function(r){t.onPosts(r.feed.entry.map((function(t){return{count:t.category.filter((function(t){return n.indexOf(t)>=0})).length,post:t}})).sort((function(t,n){return n.count-t.count})).slice(0,a.max()),r)}))}}}),t.buildUrl=q,t.feed=mt,t.posts=dt,t.routes=k,t.search=yt,t}({});
